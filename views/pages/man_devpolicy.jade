extends ../layout

block content
    .page-header(class="position-relative")
        .header-title(style="width:180px;")
            h1 策略
                small
                    i(class="fa fa-angle-right")
                    a(href="javascript:policylist()") #{ title }
                    i(class="fa fa-angle-right addpolicy" style="display:none;") 添加
                    i(class="fa fa-angle-right modpolicy" style="display:none;") 编辑
                    i(class="fa fa-angle-right viewpolicy" style="display:none;") 详情
                    i(class="fa fa-angle-right issuedpolicy" style="display:none;") 下发
    .page-body
        .row
            .devpolicylist(class="col-xs-12 col-md-12")
                .widget
                    .widget-btn
                        a(class="btn btn-primary" href="javascript:add()") 
                            i(class="fa fa-plus") 添加
                        a(class="btn btn-primary" href="javascript:auth()") 
                            i(class="fa fa-magic") 下发
                        a(class="hrefactive" href="javascript:refresh()" style="cursor:pointer;opacity:1;")
                            i(class="fa fa-refresh" style="font-size:20px;")
                            p(style="font-size:10px;margin:0;") 刷新
                        a(class="hrefactive" href="javascript:activate(1)")
                            i(class="fa fa-check-circle" style="font-size:20px;")
                            p(style="font-size:10px;margin:0;") 启用
                        a(class="hrefactive" href="javascript:activate(0)")
                            i(class="fa fa-times-circle" style="font-size:20px;")
                            p(style="font-size:10px;margin:0;") 禁用
                        a(class="hrefactive" href="javascript:deletes()")
                            i(class="fa fa-minus-square" style="font-size:20px;")
                            p(style="font-size:10px;margin:0;") 删除
                        .input-group(class="input-group-sm")
                            input(class="form-control" type="text" style="float:right;max-width:200px;" placeholder="名称" onfocus="this.placeholder=''")
                            span(class="input-group-btn")
                                button(class="btn btn-default btn-primary" type="button")
                                    i(class="glyphicon glyphicon-search")
                    .policytable(class="widget-body" style="box-shadow:none;padding:0;")
                    .page1
        .row
            .devpolicy_add(class="col-xs-12 col-md-12 setting" style="display:none;")
                .widget(style="border: 1px solid #ccc;border-radius: 3px 3px 3px 3px;")
                    .widget-header(style="height:40px;")
                        p(style="line-height: 40px;text-align: left;font-size: 16px;font-weight: bold;color: #444;") 基本信息
                    .widget-body(style="overflow:hidden;")
                        .row(class="col-xs-12 col-md-12" style="margin-bottom:0px;")
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-8 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                    label(class="control-label" for = "name" style="width:110px;")
                                        i(class="icon glyphicon glyphicon-asterisk" style="color:red; font-size:12px;margin-right:10px;")
                                        label 名称
                                    .adddiv(style="left: 140px;")
                                        input(type="text" class="form-control" id = "name" name="name")
                                        input(type="text" name="policyid" style="display:none;")
                        .row(class="col-xs-12 col-md-12" style="margin-bottom:0px;")
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-8 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                    label(class="control-label" for = "position_strategy" style="width:110px; padding-left:22px;") 定位策略
                                    .adddiv(style="left:140px;")
                                        select(class="form-control" name="position_strategy" id="position_strategy")
                                            option(class="option" value="1") 正常定位模式
                                            option(class="option" value="2") 工作日定位模式
                                            option(class="option" value="3") 不允许定位                                        
                    .widget-header(style="height:40px;")
                        p(style="line-height: 40px;text-align: left;font-size: 16px;font-weight: bold;color: #444;") 锁屏策略
                    .widget-body(style="overflow: hidden;")
                        .row(class="col-xs-12 col-md-12" style="margin-bottom:0px;")
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-8 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                    label(class="control-label" for = "pw_min_len" style="width:110px;padding-left:22px;") 密码最小长度
                                    .adddiv(style="left:140px;")
                                        select(class="form-control" name="pw_min_len" id="pw_min_len")
                                            option(class="option" value="4") 4
                                            option(class="option" value="5") 5
                                            option(class="option" value="6") 6
                                            option(class="option" value="7") 7
                                            option(class="option" value="8") 8
                                            option(class="option" value="9") 9
                                            option(class="option" value="10") 10
                                        //-input(type="number" class="form-control" id = "pw_min_len" name="pw_min_len" max="10" min="6" value="6")
                        .row(class="col-xs-12 col-md-12" style="margin-bottom:0px;")
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-8 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                    label(class="control-label" for = "passwd_type" style="width:110px; padding-left:22px;") 复杂度要求
                                    .adddiv(style="left:140px;")
                                        select(class="form-control" name="passwd_type" id="passwd_type")
                                            option(class="option" value="1") 数字密码
                                            option(class="option" value="2") 数字字母密码
                                            option(class="option" value="3") 数字字母(含大写小写)
                        .row(class="col-xs-12 col-md-12" style="margin-bottom:0px;")
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-8 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                    label(class="control-label" for = "pw_fail_count" style="width:110px; padding-left:22px;") 最大尝试次数
                                    .adddiv(style="left:140px;")
                                        select(class="form-control" name="pw_fail_count" id="pw_fail_count")
                                            option(class="option" value="0") 无限制
                                            option(class="option" value="3") 3 次
                                            option(class="option" value="5") 5 次
                                            option(class="option" value="10") 10 次
                        .row(class="col-xs-12 col-md-12" style="margin-bottom:0px;")
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-8 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                    label(class="control-label" for = "available_time" style="width:110px; padding-left:22px;") 密码有效期
                                    .adddiv(style="left:140px;")
                                        select(class="form-control" name="available_time" id="available_time")
                                            option(class="option" value="0") 永久
                                            option(class="option" value="15") 15 天
                                            option(class="option" value="30") 30 天
                                            option(class="option" value="90") 90 天
                    .widget-header(style="height:40px;")
                        p(style="line-height: 40px;text-align: left;font-size: 16px;font-weight: bold;color: #444;") 限制策略
                    .widget-body(style="overflow: hidden;")
                        .row(class="col-xs-12 col-md-12" style="margin-bottom:0px;margin-top:0px;")
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-6 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                    label(class="control-label" for = "camera" style="width:110px;padding-left:22px;") 禁止使用相机
                                    .adddiv(style="left:140px;width:80px;")
                                        label(class="cursor")
                                            input(type="checkbox" onclick="checkthis(this)" id = "camera" name="camera")
                                            span(class="text") 禁止
                        .row(class="col-xs-12 col-md-12" style="margin-bottom:0px;margin-top:0px;")
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-6 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                    label(class="control-label" for = "wifi" style="width:110px;padding-left:22px;") 禁止使用Wifi
                                    .adddiv(style="left:140px;width:80px;")
                                        label(class="cursor")
                                            input(type="checkbox" onclick="checkwifi(this)" id = "wifi" name="wifi")
                                            span(class="text") 禁止
                                    label(style="position:absolute;left:220px;width:100%;") 不能和禁止移动数据同时开启
                        .row(class="col-xs-12 col-md-12" style="margin-bottom:0px;margin-top:0px;")
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-6 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                    label(class="control-label" for = "bluetooth" style="width:110px;padding-left:22px;") 禁止使用蓝牙
                                    .adddiv(style="left:140px;width:80px;")
                                        label(class="cursor")
                                            input(type="checkbox" onclick="checkthis(this)" id = "bluetooth" name="bluetooth")
                                            span(class="text") 禁止
                        .row(class="col-xs-12 col-md-12" style="margin-bottom:0px;margin-top:0px;")
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-6 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                    label(class="control-label" for = "mobile_data" style="width:110px;padding-left:22px;") 禁止移动数据
                                    .adddiv(style="left:140px;width:200px;")
                                        label(class="cursor")
                                            input(type="checkbox" onclick="checkmobile(this)" id = "mobile_data" name="mobile_data")
                                            span(class="text") 禁止
                                    label(style="position:absolute;left:220px;width:100%;") 仅支持5.0以上系统，需获得系统权限签名
                        .row(class="col-xs-12 col-md-12" style="margin-bottom:0px;margin-top:0px;")
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-6 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                    label(class="control-label" for = "gps1" style="width:110px;padding-left:22px;") 强制开启GPS
                                    .adddiv(style="left:140px;width:80px;")
                                        label(class="cursor")
                                            input(type="checkbox" onclick="checkgps1(this)" id = "gps1" name="gps1")
                                            span(class="text") 开启
                                    label(style="position:absolute;left:220px;width:100%;") 需获得系统权限签名
                        .row(class="col-xs-12 col-md-12" style="margin-bottom:0px;margin-top:0px;")
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-6 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                    label(class="control-label" for = "gps2" style="width:110px;padding-left:22px;") 强制关闭GPS
                                    .adddiv(style="left:140px;width:80px;")
                                        label(class="cursor")
                                            input(type="checkbox" onclick="checkgps2(this)" id = "gps2" name="gps2")
                                            span(class="text") 关闭
                                    label(style="position:absolute;left:220px;width:100%;") 需获得系统权限签名
                        .row(class="col-xs-12 col-md-12" style="margin-bottom:0px;margin-top:0px;")
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-6 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                    label(class="control-label" for = "recording" style="width:110px;padding-left:22px;") 禁止录音
                                    .adddiv(style="left:140px;width:80px;")
                                        label(class="cursor")
                                            input(type="checkbox" onclick="checkthis(this)" id = "recording" name="recording")
                                            span(class="text") 禁止
                                    label(style="position:absolute;left:220px;width:100%;") 仅支持6.0以上系统，需获得系统权限签名
                        .row(class="col-xs-12 col-md-12" style="margin-bottom:0px;margin-top:0px;")
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-6 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                    label(class="control-label" for = "screenshot" style="width:110px;padding-left:22px;") 禁止截屏
                                    .adddiv(style="left:140px;width:200px;")
                                        label(class="cursor")
                                            input(type="checkbox" onclick="checkthis(this)" id = "screenshot" name="screenshot")
                                            span(class="text") 禁止
                        .row(class="col-xs-12 col-md-12" style="margin-bottom:0px;margin-top:0px;")
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-6 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                    label(class="control-label" for = "setfactory" style="width:110px;padding-left:22px;") 禁止恢复出厂
                                    .adddiv(style="left:140px;width:80px;")
                                        label(class="cursor")
                                            input(type="checkbox" onclick="checkthis(this)" id = "setfactory" name="setfactory")
                                            span(class="text") 禁止
                                    label(style="position:absolute;left:220px;width:100%;") 仅支持5.0以上系统，需获得系统权限签名
                        .row(class="col-xs-12 col-md-12" style="margin-bottom:0px;margin-top:0px;")
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-6 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                    label(class="control-label" for = "message" style="width:110px;padding-left:22px;") 禁止使用短信
                                    .adddiv(style="left:140px;width:80px;")
                                        label(class="cursor")
                                            input(type="checkbox" onclick="checkthis(this)" id = "message" name="message")
                                            span(class="text") 禁止
                        .row(class="col-xs-12 col-md-12" style="margin-bottom:0px;margin-top:0px;")
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-6 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                    label(class="control-label" for = "phone" style="width:110px;padding-left:22px;") 禁止收听电话
                                    .adddiv(style="left:140px;width:80px;")
                                        label(class="cursor")
                                            input(type="checkbox" onclick="checkthis(this)" id = "phone" name="phone")
                                            span(class="text") 禁止
                    .widget-header(style="height:40px;")
                        p(style="line-height: 40px;text-align: left;font-size: 16px;font-weight: bold;color: #444;") Wifi策略
                    .widget-body(style="overflow: hidden;" class="wifi_list")
                        .row(class="col-xs-12 col-md-12" style="margin-bottom:0px;margin-top:0px;")
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-6 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                    label(class="control-label" for = "status" style="width:110px;padding-left:22px;") 下发热点
                                    .adddiv(style="left:140px;width:80px;")
                                        label(class="cursor")
                                            input(type="checkbox" onclick="checkthis(this)" id = "status" name="status")
                                            span(class="text") 开启
                                    label(style="position:absolute;left:220px;width:100%;") 仅允许使用下发的热点
                        .wifilist
                            .row
                                .form-group
                                    div(class="col-lg-6 col-xs-6 col-sm-8 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                        label(class="control-label" style="width:110px;")
                                            i(class="icon glyphicon glyphicon-asterisk" style="color:red; font-size:12px;margin-right:10px;")
                                            label SSID
                                        .adddiv(style="left: 140px;")
                                            input(type="text" class="form-control" name="ssid")
                            .row
                                .form-group
                                    div(class="col-lg-6 col-xs-6 col-sm-8 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                        label(class="control-label" style="width:110px;")
                                            i(class="icon glyphicon glyphicon-asterisk" style="color:red; font-size:12px;margin-right:10px;")
                                            label 密码
                                        .adddiv(style="left: 140px;")
                                            input(type="text" class="form-control" name="password")
                        .row(class="addwifibtn")
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-8 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2")
                                    label(class="control-label" style="width:110px; padding-left:22px;")
                                    .adddiv(style="left:140px;text-align:center;")
                                        a(class="btn btn-primary" href="javascript:wifilist_add()" style="opacity:0.8;") 继续添加WiFi热点
                        .row
                            .form-group
                                div(class="col-lg-6 col-xs-6 col-sm-8 col-lg-offset-3 col-xs-offset-3 col-sm-offset-2" style="height:60px;")
                                    label(class="control-label" style="width:110px; padding-left:22px;")
                                    .adddiv(style="left:140px;text-align:center;margin-top:14px;")
                                        .div(class="col-lg-6 col-xs-6 col-sm-6" style="padding-top:10px;text-align:right;")
                                            a(class="btn" href="javascript:policylist()" style="width:78px;") 取消
                                        .div(class="col-lg-6 col-xs-6 col-sm-6" style="padding-top:10px; text-align:left;" class="addbtn")
                                            a(class="btn btn-primary" href="javascript:add_policy()" style="width:78px;") 保存
                                        .div(class="col-lg-6 col-xs-6 col-sm-6" style="padding-top:10px;display:none;text-align:left;" class="modbtn")
                                            a(class="btn btn-primary" href="javascript:mod_policy()") 保存并下发
                                        //-.div(class="col-lg-6 col-xs-6 col-sm-6" style="padding-top:10px;display:none;text-align:left;" class="viewbtn")
                                            a(class="btn btn-primary" href="javascript:policylist()" style="width:78px;") 确认
        .row(class="issuedlist" style="display:none;")
            .widget
                div(class="col-xs-12 col-md-12")
                    .widget-btn
                        a(class="btn btn-primary issuedpl" href="javascript:authbtn()")
                            i(class="fa fa-check") 下发
                        .input-group(class="input-group-sm" style="padding-right:27px;")
                            input(class="form-control" type="text" name="keyvalue" placeholder="按账号搜索" onfocus="this.placeholder=''" style="float:right;max-width:200px;")
                            span(class="input-group-btn")
                                button(class="btn btn-default btn-primary" type="button" onclick="searchauthlist()")
                                    i(class="glyphicon glyphicon-search")
            .tab(class="col-lg-12 col-sm-12 col-xs-12")
                .widget-main
                    .tabbable
                        input(name="policy_id" style="display:none;")
                        ul(class="nav nav-tabs tabs-flat" id="myTab11")
                            li(class="active")
                                a(data-toggle="tab" href="#departs") 用户组
                            li
                                a(data-toggle="tab" href="#usertag") 标签列表
                        div(class="tab-content tabs-flat")
                            div(id="departs" class="tab-pane in active")
                                div(class="col-lg-4 col-sm-4 col-xs-4")
                                    //-.treeheader(style="height:24px;")
                                        .tree-item
                                            .tree-item-name
                                                i(class="fa fa-check-square-o cursor" onclick="cancelalltree(this)" style="margin-right:10px;")
                                                i(class="fa fa-square-o cursor" onclick="selectalltree(this)" style="margin-right:10px;display:none;")
                                                i(class="fa fa-plus faopen cursor" onclick="opentree(this)" style="width:15px;")
                                                i(class="fa fa-minus faclose cursor" onclick="closetree(this)" style="width:15px; display:none;")
                                                
                                                所有用户组
                                    #treegroup
                                div(class="col-lg-8 col-sm-8 col-xs-8")
                                    .usertable(style="box-shadow:none;padding:0;")
                                    .page2
                            div(id="usertag" class="tab-pane")
                                div(class="col-lg-4 col-sm-4 col-xs-4")
                                    ul(id="usertaglist" style="padding-left:0px;font-size:14px;color:#666;")
                                div(class="col-lg-8 col-sm-8 col-xs-8")
                                    .tagusertable(style="box-shadow:none;padding:0;")
                                    .page3
        .bootbox(class="modal fade bootbox-confirm in modal-primary" tabindex="-1" role="dialog" style="display:none;" aria-hidden="false")
            .modal-dialog(style="width:500px;")
                .modal-content
        .background 
    script(async="true" src="/scripts/jquery.min.js")
    script(async="true" src="/scripts/man_devpolicy.js")